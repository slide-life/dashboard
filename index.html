<!DOCTYPE HTML>
<html>
  <head>
    <title>Form</title>
    <link rel="stylesheet" href="bower_components/slide.js/dist/css/slide.css" />
  </head>
  <body>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/slide.js/dist/js/slide.js"></script>
    <script type="text/javascript">
      var CARDS = ['slide.life:bank.card', 'slide.life:bank.account', 'slide.life:name',
              'slide.life:mobile-phone', 'slide.life:home-phone', 'slide.life:university',
              'slide.life:passport', 'slide.life:id-card', 'slide.life:drivers-license',
              'slide.life:address'];

      function showModal(userData) {
        Slide.presentModalFormFromIdentifiers(CARDS, userData);
      }

      // Load a user or create a new one
      function loadUser(cb) {
        Slide.User.load(function(next) {
          Slide.User.register("16144408217", function(user) {
            user.persist();
            next(user);
          });
        }, cb);
      }

      loadUser(function(user) {
        user.getProfile(function(profile) {
          showModal(profile);
          user.patchProfile(serializePatch(profile), function(patch) {
            console.log("assert", profile, patch);
          });
        });
      });
    </script>
  </body>
</html>
